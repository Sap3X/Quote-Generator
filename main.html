<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS link -->
    <link rel="stylesheet" href="style.css">
    <title>Quote Generator</title>
</head>
<body>
    <div class="opt">
        <button id="switch">
            <img src="assets/moon-solid.png" alt="img-for-dark" height="100%">
            <img src="assets/moon-regular.png" alt="img-for-light" height="100%">
        </button>

        <select id="options">
            <option value="history">History</option>
            <option value="love">Love</option>
            <option value="life">Life</option>
        </select>
    </div>

    <div class="box">
        <h1>Quote Generator</h1>
        <p id="quote">Loading...</p>
        <span id="author">Loading...</span>

       
        <div class="btn">
            <button id="previous"onclick="dec()">Previous</button>
            <button id="random" onclick="random()">Random</button>
            <button id="next" onclick="inc()">Next</button>
        </div>
    </div>

    <script>
        const quote=document.getElementById("quote");
        const author=document.getElementById("author");
        
        let select=document.getElementById("options");
        let count=0

        let darkmode = localStorage.getItem('dark-mode');
        const switchButton = document.getElementById('switch');

        const enableDarkMode = () => {
            document.body.classList.add('dark-mode')
            localStorage.setItem('dark-mode', 'active')
        }

        const disableDarkMode = () => {
            document.body.classList.remove('dark-mode')
            localStorage.setItem('dark-mode', null)
        }

        if(darkmode === 'active') {
            enableDarkMode()
        }

        switchButton.addEventListener("click", () => {
            darkmode = localStorage.getItem('dark-mode')
            darkmode !== "active" ? enableDarkMode() : disableDarkMode();
        })

        function inc() {
            if (count >= 9) {
                count = 9;
                alert("No more quotes available.");
            }
            else
                count++;
            api_call_Pre_nex();
        }

        function dec() {
            if (count <= 0) {
                count = 0;
                alert("Please enter Next.");
            }
            else
                count--;
            api_call_Pre_nex();
        }
        
        async function api_call_Pre_nex() {
            const response = await fetch("https://thequoteshub.com/api/tags/" + select.value);
            var data = await response.json();
            quote.innerHTML = data.quotes[count].text;
            author.innerHTML = data.quotes[count].author;
        }
        random();
       
        async function random() {
            const response = await fetch("https://thequoteshub.com/api/tags/" + select.value);
            var data = await response.json();
            count = Math.floor(Math.random() * data.quotes.length);
            quote.innerHTML = data.quotes[count].text;
            author.innerHTML = data.quotes[count].author;
        }
        select.addEventListener("change", function() {
            count = 0;
            api_call_Pre_nex();
        });


    </script>
</body>
</html>